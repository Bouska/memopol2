{% extends "base.html" %}

{% block content %}

<h1>Votes of <a href="{% url meps:mep representative.id %}">{{ representative.first_name }} {{ representative.last_name }}</a> on <a href="{% url votes:detail proposal.id %}">{{ proposal.title }}</a></h1>

<p>{{ vote.recommendation.description }}</p>
<ul>
    {% for vote in votes %}
    <li>
        {% if vote.recommendation.description %}{{ vote.recommendation.description }}{% else %}No description yet{% endif %}
        <ul>
            <div class="{{ vote.recommendation.recommendation }}">
            <li><em>Part</em> : <a href="{% url votes:recommendation proposal.id vote.recommendation.id %}">{{ vote.recommendation.part }}</a></li>
            {% if vote.recommendation.recommendation %}<li><em>Recommendation</em> : <a href="{% url votes:recommendation_choice proposal.id vote.recommendation.id vote.recommendation.recommendation %}">{{ vote.recommendation.recommendation }}</a></li>{% endif %}
            {% if vote.recommendation.weight %}<li><em>Weight</em> : {{ vote.recommendation.weight }}</li>{% endif %}
            <li style="background:{% if vote.recommendation.recommendation == vote.choice %}rgb(0, 255, 0){% else %}{% if vote.choice == "abstention" %}rgb(255, 165, 0){% else %}rgb(255, 0, 0){% endif %}{% endif %}"><em>Vote</em> : <a href="{% url votes:recommendation_choice proposal.id vote.recommendation.id vote.choice %}">{{ vote.choice }}</a></li>
            </div>
        </ul>
    </li>
    <br>
    {% endfor %}
</ul>

{% endblock %}
